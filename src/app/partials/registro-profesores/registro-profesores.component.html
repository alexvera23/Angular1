<div class="wrapper p-md-4">
  <form [formGroup]="maestroForm" (ngSubmit)="registrar()">
    <h3 class="title-user mb-4">Ingresa los datos del Profesor</h3>

    <div class="mb-3">
      <label for="n_empleado" class="form-label">ID de Trabajador</label>
      <input type="text" id="n_empleado" class="form-control" formControlName="n_empleado" placeholder="Escribe el No. de Empleado">
      <div *ngIf="maestroForm.get('n_empleado')?.invalid && maestroForm.get('n_empleado')?.touched" class="invalid-feedback d-block">
        El No. de Empleado es requerido.
      </div>
    </div>

    <div class="mb-3">
      <label for="first_name_maestro" class="form-label">Nombre(s)</label>
      <input type="text" id="first_name_maestro" class="form-control" formControlName="first_name" placeholder="Escribe el nombre" (keypress)="soloLetras($event)">
      <div *ngIf="maestroForm.get('first_name')?.invalid && maestroForm.get('first_name')?.touched" class="invalid-feedback d-block">
        El nombre es requerido.
      </div>
    </div>

    <div class="mb-3">
      <label for="last_name_maestro" class="form-label">Apellidos</label>
      <input type="text" id="last_name_maestro" class="form-control" formControlName="last_name" placeholder="Escribe los apellidos" (keypress)="soloLetras($event)">
       <div *ngIf="maestroForm.get('last_name')?.invalid && maestroForm.get('last_name')?.touched" class="invalid-feedback d-block">
        Los apellidos son requeridos.
      </div>
    </div>

    <div class="mb-3">
      <label for="email_maestro" class="form-label">Correo Electrónico</label>
      <input type="email" id="email_maestro" class="form-control" formControlName="email" placeholder="nombre@correo.com">
      <div *ngIf="maestroForm.get('email')?.touched && maestroForm.get('email')?.errors" class="invalid-feedback d-block">
        <span *ngIf="maestroForm.get('email')?.hasError('required')">El correo es requerido.</span>
        <span *ngIf="maestroForm.get('email')?.hasError('email')">El formato es inválido.</span>
      </div>
    </div>

    <div class="mb-3" *ngIf="!editar">
      <label for="password_maestro" class="form-label">Contraseña</label>
      <input type="password" id="password_maestro" class="form-control" formControlName="password" placeholder="Mínimo 8 caracteres">
       <div *ngIf="maestroForm.get('password')?.touched && maestroForm.get('password')?.errors" class="invalid-feedback d-block">
        <span *ngIf="maestroForm.get('password')?.hasError('required')">La contraseña es requerida.</span>
        <span *ngIf="maestroForm.get('password')?.hasError('minlength')">Debe tener al menos 8 caracteres.</span>
      </div>
    </div>

    <div class="mb-3" *ngIf="!editar">
      <label for="confirmar_password_maestro" class="form-label">Confirmar Contraseña</label>
      <input type="password" id="confirmar_password_maestro" class="form-control" formControlName="confirmar_password" placeholder="Repite la contraseña">
      <div *ngIf="maestroForm.get('confirmar_password')?.invalid && maestroForm.get('confirmar_password')?.touched" class="invalid-feedback d-block">
        La confirmación es requerida.
      </div>
    </div>
    
    <div class="mb-3">
        <label for="fecha_nacimiento_maestro" class="form-label">Fecha de Nacimiento</label>
        <input type="date" id="fecha_nacimiento_maestro" class="form-control" formControlName="fecha_nacimiento">
        <div *ngIf="maestroForm.get('fecha_nacimiento')?.invalid && maestroForm.get('fecha_nacimiento')?.touched" class="invalid-feedback d-block">
            La fecha de nacimiento es requerida.
        </div>
    </div>

    <div class="mb-3">
        <label for="telefono_maestro" class="form-label">Teléfono</label>
        <input type="tel" id="telefono_maestro" class="form-control" formControlName="telefono" mask='(000) 000-0000' placeholder="(000) 000-0000">
         <div *ngIf="maestroForm.get('telefono')?.invalid && maestroForm.get('telefono')?.touched" class="invalid-feedback d-block">
            El teléfono es requerido.
        </div>
    </div>

    <div class="mb-3">
        <label for="cubiculo" class="form-label">Cubículo</label>
        <input type="text" id="cubiculo" class="form-control" formControlName="cubiculo" placeholder="Escribe el cubículo">
        <div *ngIf="maestroForm.get('cubiculo')?.invalid && maestroForm.get('cubiculo')?.touched" class="invalid-feedback d-block">
            El cubículo es requerido.
        </div>
    </div>

    <div class="mb-3">
      <label for="area_investigacion" class="form-label">Área de Investigación</label>
      <input type="text" id="area_investigacion" class="form-control" formControlName="area_investigacion" placeholder="Escribe el área de investigación">
      <div *ngIf="maestroForm.get('area_investigacion')?.invalid && maestroForm.get('area_investigacion')?.touched" class="invalid-feedback d-block">
        El área de investigación es requerida.
      </div>
    </div>

    <div class="mb-3">
      <label class="form-label">Selecciona las materias a impartir</label>
      <div class="materias-container p-3 border rounded">
        <div *ngFor="let materia of materiasData" class="form-check">
          <input 
            class="form-check-input" 
            type="checkbox" 
            [value]="materia.id"
            id="materia-{{materia.id}}"
            (change)="onCheckboxChange($event)">
          <label class="form-check-label" for="materia-{{materia.id}}">
            {{ materia.nombre }}
          </label>
        </div>
      </div>
      <div *ngIf="maestroForm.get('materias')?.invalid && maestroForm.get('materias')?.touched" class="invalid-feedback d-block">
          Debes seleccionar al menos una materia.
      </div>
    </div>

    <div class="d-flex justify-content-end gap-2 mt-4">
      <button class="btn btn-primary" type="submit">Registrar Profesor</button>
    </div>
  </form>
</div>

